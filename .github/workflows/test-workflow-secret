sname: Test Workflow

on:
  push:
    branches:
      - main
  repository_dispatch:
    types: [manual-trigger]  

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up environment variables
        env:
          SERVICE_ACCOUNT_TOKEN: ${{ secrets.SERVICE_ACCOUNT_TOKEN }}
        run: |
          echo "SERVICE_ACCOUNT_TOKEN=${{ secrets.SERVICE_ACCOUNT_TOKEN }}" >> $GITHUB_ENV

      - name: Run Script and Print content
        run: |
          echo "Hello. This is the first workflow using Secrets !!!"
          ./trigger-workflow1.sh
        env:
          SERVICE_ACCOUNT_TOKEN: ${{ secrets.SERVICE_ACCOUNT_TOKEN }}
